#ifndef EVENT_HPP
#define EVENT_HPP

#include <stdlib.h>
#include <fatcnt/events/catagorizer/cmodes.hpp>
#include <fatcnt/protocols/common/mspdirection.hpp>
#include <fatcnt/protocols/common/mspcommands.hpp>

namespace rrobot {
/**
 *  @brief events are added to queues.
 */
class Event {
   public:
    // constructor for outbound, or requests with a payload.
    Event(MSPCOMMANDS command, MSPDIRECTION direction, void* payload)
        : _command(command), 
          _direction(_direction),
          _payload(payload) {
        
        _hasPayload = true;
    }

    // constructor for inbound request, payload is not set.
    Event(MSPCOMMANDS command, MSPDIRECTION direction)        
        : _command(command), 
          _direction(_direction) {}

    /**
     * @fn hasPayload
     * @brief
     * returns true if payload has been set (this usually indicates outbound), false if not this will usually indicate
     * inbound.
     */
    bool hasPayload() {return _hasPayload;}

    /**
     * @fn getPayload
     * @brief 
     * Returns the payload
     * @return payload
     */
    template <typename T> T getPayload() {
        return *(reinterpret_cast<T*>(_payload));
    }

    MSPCOMMANDS getCommand() {
        return _command;
    }

    MSPDIRECTION getDirection() {
        return _direction;
    }

   private:
    const MSPCOMMANDS  _command;   // command
    const MSPDIRECTION _direction; // direction of command
    void*              _payload;   // payload
    bool               _hasPayload = false;    
};
}  // namespace rrobot

#endif  // EVENT_HPP